<div class="modal-overlay" (click)="handleOverlayClick($event)">
  <div class="modal-container">
    <div class="modal-header">
      <h3>Recuperar Senha</h3>
      <button class="close-btn" (click)="closeModal()" type="button">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="modal-body">
      <p class="modal-description">
        <i class="fas fa-info-circle me-2"></i>
        Digite seu email para receber um link de recuperação de senha.
      </p>

      <form (ngSubmit)="onSubmit()" #forgotPasswordForm="ngForm">
        <div class="mb-3">
          <label for="email" class="form-label">
            E-mail <span class="required-asterisk">*</span>
          </label>
          <input
            type="email"
            class="form-control"
            id="email"
            name="email"
            [(ngModel)]="email"
            #emailInput="ngModel"
            required
            email
            placeholder="seu@email.com"
            [class.is-invalid]="emailInput.invalid && emailInput.touched"
            [disabled]="isLoading"
          />
          <div class="invalid-feedback" *ngIf="emailInput.invalid && emailInput.touched">
            <div *ngIf="emailInput.errors?.['required']">Email é obrigatório</div>
            <div *ngIf="emailInput.errors?.['email']">Email deve ter um formato válido</div>
          </div>
        </div>

        <div class="success-message" *ngIf="successMessage">
          <i class="fas fa-check-circle me-2"></i>
          {{ successMessage }}
        </div>

        <div class="error-message" *ngIf="errorMessage">
          <i class="fas fa-exclamation-triangle me-2"></i>
          {{ errorMessage }}
        </div>

        <div class="modal-actions">
          <button
            type="button"
            class="btn btn-secondary"
            (click)="closeModal()"
            [disabled]="isLoading"
          >
            Cancelar
          </button>
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="forgotPasswordForm.invalid || isLoading"
          >
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
            <i *ngIf="!isLoading" class="fas fa-paper-plane me-2"></i>
            <span *ngIf="isLoading">Enviando...</span>
            <span *ngIf="!isLoading">Enviar Link</span>
          </button>
        </div>
      </form>

      <div class="security-info">
        <i class="fas fa-shield-alt me-2"></i>
        <small>
          Por segurança, o link de recuperação expira em 1 hora e só pode ser usado uma vez.
        </small>
      </div>
    </div>
  </div>
</div>
