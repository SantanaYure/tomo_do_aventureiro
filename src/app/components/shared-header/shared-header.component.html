<!-- Sidebar Navigation -->
<aside
  class="sidebar"
  [class.collapsed]="isSidebarCollapsed"
  [class.mobile-open]="isMobileMenuOpen"
>
  <div class="sidebar-content">
    <!-- Logo Section -->
    <div class="sidebar-header">
      <div class="brand-section" [routerLink]="['/home']" style="cursor: pointer">
        <img src="logo_rpg.png" alt="Tomo do Aventureiro" class="logo" />
        <span class="brand-title">Tomo do Aventureiro</span>
      </div>

      <!-- Toggle Button (Desktop) - Seta na Borda -->
      <button
        class="sidebar-toggle-btn"
        (click)="toggleSidebar()"
        *ngIf="!isMobile"
        [class.collapsed]="isSidebarCollapsed"
        [title]="isSidebarCollapsed ? 'Expandir menu' : 'Recolher menu'"
      >
        <i class="bi" [ngClass]="isSidebarCollapsed ? 'bi-chevron-right' : 'bi-chevron-left'"></i>
      </button>
    </div>

    <!-- Navigation Menu -->
    <nav class="sidebar-nav">
      <a
        routerLink="/home"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
        class="nav-link"
        (click)="closeMobileMenu()"
        [title]="isSidebarCollapsed ? 'Home' : ''"
      >
        <i class="bi bi-house-door"></i>
        <span *ngIf="!isSidebarCollapsed">Home</span>
      </a>
      <a
        class="nav-link"
        (click)="createNewCharacter()"
        [title]="isSidebarCollapsed ? 'Criar Personagem' : ''"
        [class.active]="router.url.includes('/create-character')"
      >
        <i class="bi bi-person-plus"></i>
        <span *ngIf="!isSidebarCollapsed">Criar Personagem</span>
      </a>
      <a
        routerLink="/my-characters"
        routerLinkActive="active"
        class="nav-link"
        (click)="closeMobileMenu()"
        [title]="isSidebarCollapsed ? 'Visualizar Personagens' : ''"
      >
        <i class="bi bi-people"></i>
        <span *ngIf="!isSidebarCollapsed">Visualizar Personagens</span>
      </a>
      <a
        routerLink="/template-creator"
        routerLinkActive="active"
        class="nav-link"
        (click)="closeMobileMenu()"
        [title]="isSidebarCollapsed ? 'Criador de Templates' : ''"
      >
        <i class="bi bi-file-earmark-plus"></i>
        <span *ngIf="!isSidebarCollapsed">Criador de Templates</span>
      </a>
    </nav>

    <!-- User Profile Section - BOTTOM -->
    <div class="sidebar-footer">
      <div class="user-profile-sidebar">
        <div class="user-avatar">
          <img
            *ngIf="userPhotoURL"
            [src]="userPhotoURL"
            alt="Foto do usuário"
            class="avatar-image"
          />
          <i *ngIf="!userPhotoURL" class="bi bi-person-circle"></i>
        </div>
        <div class="user-info" *ngIf="!isSidebarCollapsed">
          <span class="user-name">{{ userName }}</span>
          <span class="user-email">{{ userEmail }}</span>
        </div>
      </div>

      <!-- Logout Button - Sempre Visível -->
      <button
        class="logout-btn"
        (click)="logout()"
        [title]="isSidebarCollapsed ? 'Sair do sistema' : ''"
      >
        <i class="bi bi-box-arrow-right"></i>
        <span *ngIf="!isSidebarCollapsed">Sair do sistema</span>
      </button>
    </div>
  </div>
</aside>

<!-- Mobile Menu Button -->
<button
  class="mobile-menu-btn"
  *ngIf="isMobile"
  (click)="toggleMobileMenu()"
  [class.active]="isMobileMenuOpen"
>
  <i class="bi" [ngClass]="isMobileMenuOpen ? 'bi-chevron-left' : 'bi-chevron-right'"></i>
</button>

<!-- Overlay para fechar menus -->
<div
  class="menu-overlay"
  *ngIf="(isDropdownOpen || isMobileMenuOpen) && isMobile"
  (click)="closeAllMenus()"
></div>
